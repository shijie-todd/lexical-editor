# 列表嵌套 Markdown 测试

## 测试说明
这个文件用于测试优化后的列表 markdown 转换功能。

## 无序列表测试

### 基础无序列表
- 第一项
- 第二项
- 第三项

### 嵌套无序列表
- 一级列表项 1
    - 二级列表项 1.1
    - 二级列表项 1.2
        - 三级列表项 1.2.1
        - 三级列表项 1.2.2
    - 二级列表项 1.3
- 一级列表项 2
    - 二级列表项 2.1

### 混合使用不同标记
- 使用减号
* 使用星号
+ 使用加号

## 有序列表测试

### 基础有序列表
1. 第一项
2. 第二项
3. 第三项

### 嵌套有序列表
1. 一级列表项 1
    1. 二级列表项 1.1
    2. 二级列表项 1.2
        1. 三级列表项 1.2.1
        2. 三级列表项 1.2.2
    3. 二级列表项 1.3
2. 一级列表项 2
    1. 二级列表项 2.1

## 任务列表测试

### 基础任务列表
- [ ] 未完成任务 1
- [x] 已完成任务 1
- [ ] 未完成任务 2

### 嵌套任务列表
- [ ] 一级任务 1
    - [ ] 二级任务 1.1
    - [x] 二级任务 1.2（已完成）
        - [ ] 三级任务 1.2.1
- [x] 一级任务 2（已完成）
    - [ ] 二级任务 2.1

## 混合列表测试

### 无序列表中嵌套有序列表
- 无序列表项 1
    1. 有序子项 1.1
    2. 有序子项 1.2
- 无序列表项 2

### 有序列表中嵌套无序列表
1. 有序列表项 1
    - 无序子项 1.1
    - 无序子项 1.2
2. 有序列表项 2

## 期望行为

### 导入 (Markdown → Lexical)
- 4个空格 = 1级嵌套
- 8个空格 = 2级嵌套
- 通过 `listItem.setIndent()` 实现嵌套

### 导出 (Lexical → Markdown)
- 每级嵌套增加4个空格
- 保持列表标记（-, *, +）
- 正确导出任务列表的勾选状态

## 关键修复点

1. **使用状态系统**：通过 `listMarkerState` 存储列表标记
2. **正确的缩进处理**：使用 `listItem.setIndent(depth)` 而不是创建嵌套的 ListNode
3. **准确的导出逻辑**：使用 `depth * 4` 个空格来表示缩进级别
4. **完全兼容官方实现**：参考 `@lexical/markdown` 的官方实现

